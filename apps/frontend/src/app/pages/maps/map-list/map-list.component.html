<div class="container mx-auto mx-auto mb-3 max-w-full sm:px-4 sm:px-4">
  <form
    class="search flex flex-wrap items-center justify-between"
    [formGroup]="searchOptions"
    (ngSubmit)="onPageChange(1)"
    (change)="onPageChange(1)"
  >
    <div class="search-controls flex flex-wrap items-center">
      <input
        nbInput
        class="mb-1 block w-full appearance-none rounded border border-gray-200 bg-white px-2 py-1 text-base leading-normal text-gray-800"
        type="text"
        placeholder="Map Name"
        formControlName="search"
      />
      <!-- TODO: Enable when map credits get reworked (#415) -->
      <!-- <div class="form-col w-full sm:w-4/5 pr-4 pl-4 md:w-1/2 pr-4 pl-4 lg:w-1/3 pr-4 pl-4 xl:w-1/4 pr-4 pl-4 mt-3 md:mt-0">
        <input nbInput fullWidth class="block appearance-none w-full py-1 px-2 mb-1 text-base leading-normal bg-white text-gray-800 border border-gray-200 rounded" type="text" placeholder="Author" formControlName="author">
      </div> -->
      <!-- TODO: When the author field is added change mt-md-0 to mt-lg-0 -->
      <nb-select placeholder="Game Mode" formControlName="type" (selectedChange)="onPageChange(1)">
        <nb-option *ngFor="let enum of types" [value]="enum.value">{{ enum.text }}</nb-option>
      </nb-select>
      <!-- TODO: When the author field is added change mt-lg-0 to mt-xl-0 -->
      <nb-select placeholder="Status" formControlName="status" (selectedChange)="onPageChange(1)" *ngIf="isUpload">
        <nb-option *ngFor="let enum of statuses" [value]="enum.value">{{ enum.text }}</nb-option>
      </nb-select>
      <div class="search-toggles flex">
        <nb-toggle class="test" formControlName="inLibrary" labelPosition="left" *ngIf="!isUpload">In Library</nb-toggle>
        <nb-toggle class="test" formControlName="inFavorites" labelPosition="left" *ngIf="!isUpload">Favorites </nb-toggle>
      </div>
    </div>
    <button nbButton outline status="info" type="submit">Search</button>
  </form>
</div>
<div *ngIf="requestSent && maps?.length">
  <nb-list class="overflow-hidden">
    <nb-list-item
      *ngFor="
        let map of maps
          | paginate
            : {
                itemsPerPage: pageLimit,
                currentPage: currentPage,
                totalItems: mapCount
              }
      "
    >
      <mom-map-list-item
        [map]="map"
        [inLibrary]="isMapInLibrary(map)"
        (libraryUpdate)="libraryUpdate()"
        [isUpload]="isUpload"
        [inFavorites]="isMapInFavorites(map)"
        (favoriteUpdate)="favoriteUpdate()"
      />
    </nb-list-item>
  </nb-list>
  <div class="text-center">
    <pagination-controls (pageChange)="onPageChange($event)" [autoHide]="true" [responsive]="true"></pagination-controls>
  </div>
</div>
<div class="text-center" *ngIf="requestSent && maps?.length === 0 && !isSearchFiltered()">
  <h3 class="m-0">
    <ng-template *ngIf="isUpload; else elseBlock">
      <i>You have not uploaded any maps. Try <a routerLink="/maps/uploads/new">uploading a new one!</a></i>
    </ng-template>
    <ng-template #elseBlock>
      <h3>No maps found!</h3>
    </ng-template>
  </h3>
</div>
<div class="text-center" *ngIf="requestSent && maps?.length === 0 && isSearchFiltered()">
  <h3 class="m-0">{{ noMapsText }}</h3>
</div>
<div class="text-center" *ngIf="!requestSent">
  <h3 class="m-0">Waiting for API response</h3>
</div>
