<nb-card>
  <nb-card-header><h2>EDIT PROFILE</h2></nb-card-header>
  <nb-card-body>
    <form [formGroup]="profileEditFormGroup" (ngSubmit)="onSubmit()">
      <nb-tabset>
        <nb-tab tabTitle="PROFILE">
          <div class="form-group" [ngClass]="{'has-error':!profileEditFormGroup.controls['alias'].valid}">
            <label>
              Username:
              <input class="form-control" formControlName="alias" type="alias">
              <p class="alert alert-danger" *ngIf="profileEditFormGroup.controls['alias'].hasError('minlength')">
                Username must be at least 3 characters.
              </p>
              <p class="alert alert-danger" *ngIf="profileEditFormGroup.controls['alias'].hasError('maxlength')">
                Username cannot exceed 25 characters.
              </p>
              <p class="alert alert-danger" *ngIf="profileEditFormGroup.controls['alias'].hasError('required') && profileEditFormGroup.controls['alias'].dirty">
                Username is required.
              </p>
            </label>
          </div>


          <div class="form-group" [ngClass]="{'has-error':!profileEditFormGroup.controls['bio'].valid}">
            <label>Bio:</label>
            <textarea class="form-control" formControlName="bio" type="bio"></textarea>

            <p class="alert alert-danger" *ngIf="profileEditFormGroup.controls['bio'].hasError('maxlength')">
              Text cannot exceed 500 characters.
            </p>

          </div>
        </nb-tab>
        <nb-tab tabTitle="SOCIAL LINKS">
          <div class="form-group">
            <div>
              <span>Twitter:</span>
            </div>
            <div>
              <img *ngIf="profile && !profile.twitterAuth" src="/assets/images/twitter_button.png" (click)="auth('twitter')">
              <div *ngIf="profile && profile.twitterAuth">
                <span class="authorized">Authorized as {{profile.twitterAuth.displayName}}</span>
                <button class="btn btn-outline-danger" type="button" (click)="unAuth('twitter')">Unauthorize</button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div>
              <span>Discord:</span>
            </div>
            <div>
              <img *ngIf="profile && !profile.discordAuth" src="/assets/images/discord_button.png" (click)="auth('discord')">
              <div *ngIf="profile && profile.discordAuth">
                <span class="authorized">Authorized as {{profile.discordAuth.displayName}}</span>
                <button class="btn btn-outline-danger" type="button" (click)="unAuth('discord')">Unauthorize</button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div>
              <span>Twitch.tv</span>
            </div>
            <div>
              <img *ngIf="profile && !profile.twitchAuth" src="/assets/images/twitch_button.png" (click)="auth('twitch')">
              <div *ngIf="profile && profile.twitchAuth">
                <span class="authorized">Authorized as {{profile.twitchAuth.displayName}}</span>
                <button class="btn btn-outline-danger" type="button" (click)="unAuth('twitch')">Unauthorize</button>
                <div>
                  <span>
                    Note: You'll also have to manually disconnect "Momentum" from your <a href="https://www.twitch.tv/settings/connections">connections page</a>.<br/>
                    (Twitch is the only site that doesn't do this automatically.)
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label>
              Youtube:
              <input class="form-control" type="text">
            </label>
          </div>
        </nb-tab>
      </nb-tabset>
      <button class="btn btn-md btn-primary" type="submit" [disabled]="!profileEditFormGroup.valid">
        Save changes
      </button>
    </form>
  </nb-card-body>
</nb-card>
